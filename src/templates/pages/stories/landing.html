{% extends "layouts/landing.html" %}

{% block filters %}
  <li><a class="is-current" href="/blog/page-1">Recent</a></li>
  <li><span class="separator"></span></li>

  {% for category in categories %}
  <li><a href="{{ category | route('category') }}">{{ category.title }}</a></li>
  {% endfor %}
{% endblock %}

{% block listings %}
<div class="listings">
  <ul class="listings__list">
    {% for story in stories | sort(true, true, "_enabledAt") %}
    <li>
      <div class="listing">
        <a href="{{ story | route('story') }}">
          <header class="listing__header">
            <div class="listing__rubric">
              <span>{{ story._enabledAt | date("MMMM D, YYYY") }}</span>

              {% for category in story.category %}
              <span>{{ category.title }}</span>
              {% endfor %}
            </div>

            <h2 class="listing__heading">{{ story.title }}</h2>
          </header>

          <div class="listing__image">
            <img srcset="{{ story.tout.image.s3Key | image({w: 900, auto: 'compress,format'}) | escape }} 1x, {{ story.tout.image.s3Key | image({w: 1800, auto: 'compress,format'}) | escape }} 2x"
                 src="{{ story.tout.image.s3Key | image({w: 1800, auto: 'compress,format'}) | escape }}"
                 data-image
                 data-bind="imageLoaded"
            />
          </div>

          <div class="listing__content">{{ story.tout.dek }}</div>
        </a>
      </div>
    </li>
    {% endfor %}
  </ul>
</div>
{% endblock %}
